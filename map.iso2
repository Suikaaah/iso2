type a = 0 | 1 | 2
type b = A | B | C
type al = ANil | ACons (a, al)
type bl = BNil | BCons (b, bl)

let iso map = \f: a <-> b.
  rec map : al <-> bl.
  | ACons (h', t') <->
      let t = map t' in
      let h = f h' in
      BCons (h, t)
  | ANil <-> BNil
in

let iso f = iso : a <-> b. 0 <-> A | 1 <-> B | 2 <-> C in
let result = (map f) ACons (1, ACons (0, ACons (2, ANil))) in
(result, (invert map f) result)
